{"ast":null,"code":"import React,{useEffect,useState}from'react';import axios from'axios';// Thư viện để đọc rss\nimport cheerio from'cheerio';// Thư viện xử lý rss\nimport\"./detail.css\";import{useParams}from'react-router-dom';// import bootstrap from 'bootstrap/dist/css/bootstrap.min.css';\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Detail=_ref=>{let{articles}=_ref;const{link}=useParams();// Lấy tham số từ URL, trong trường hợp này là link\nconst[detail,setDetail]=useState(null);// State để lưu chi tiết bài viết\nconst[feedItems,setFeedItems]=useState([]);// State để lưu danh sách các bài viết liên quan\n// Hàm giải mã các ký tự đặc biệt trong chuỗi HTML\nfunction decodeHTMLEntities(text){const entities={'&apos;':\"'\",'&amp;':'&','&lt;':'<','&gt;':'>','&quot;':'\"'};// Thay thế các ký tự đặc biệt trong chuỗi với các thực thể tương ứng\nObject.keys(entities).forEach(entity=>{const regex=new RegExp(entity,'g');text=text.replace(regex,entities[entity]);});// Sử dụng DOMParser để phân tích chuỗi HTML và trả về nội dung văn bản của nó\nconst parser=new DOMParser();const doc=parser.parseFromString(text,'text/html');return doc.documentElement.textContent||text;}// Hàm trích xuất đường dẫn từ URL\nconst extractLinkPath=url=>{const parts=url.split('/');return parts[parts.length-1];};// Sử dụng useEffect để gọi API và cập nhật state khi tham số link thay đổi\nuseEffect(()=>{async function fetch(){try{// Lấy HTML từ articles.content để xử lý\nconst html=articles.content;const $=cheerio.load(html);// Xử lý các lớp CSS trong HTML để sử dụng className thay vì class\n$('[class]').each((index,element)=>{var _$$attr;const classes=((_$$attr=$(element).attr('class'))===null||_$$attr===void 0?void 0:_$$attr.split(' '))||[];classes.forEach(className=>{$(element).removeClass(className).addClass(className);});});// Trích xuất các thông tin cần thiết từ HTML\nconst title=decodeHTMLEntities(articles.title);const content=$.html();const dateUp=articles.isoDate;const demo=decodeHTMLEntities(articles.contentSnippet);const navItemsFiltered=[];// Không có thông tin breadcrumb trong props articles\n// Cập nhật state detail với các thông tin vừa trích xuất được\nsetDetail({title,demo,content,dateUp,navItems:navItemsFiltered});}catch(error){console.error('Error fetching the HTML:',error);}}// Gọi hàm fetch khi component mount\nfetch();},[]);// useEffect sẽ chỉ gọi một lần khi component mount\n// Render UI\nreturn/*#__PURE__*/_jsx(\"div\",{className:\"container\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"subContainer\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"breadCrumbDetail\",children:/*#__PURE__*/_jsx(\"ul\",{})}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{className:\"contentDetailTitle\",children:(detail===null||detail===void 0?void 0:detail.title)||'Loading...'}),/*#__PURE__*/_jsx(\"h2\",{className:\"contentDetailSapo\",children:detail===null||detail===void 0?void 0:detail.demo}),/*#__PURE__*/_jsx(\"div\",{className:\"maincontent\",dangerouslySetInnerHTML:{__html:(detail===null||detail===void 0?void 0:detail.content)||''}})]})]})});};export default Detail;","map":{"version":3,"names":["React","useEffect","useState","axios","cheerio","useParams","jsx","_jsx","jsxs","_jsxs","Detail","_ref","articles","link","detail","setDetail","feedItems","setFeedItems","decodeHTMLEntities","text","entities","Object","keys","forEach","entity","regex","RegExp","replace","parser","DOMParser","doc","parseFromString","documentElement","textContent","extractLinkPath","url","parts","split","length","fetch","html","content","$","load","each","index","element","_$$attr","classes","attr","className","removeClass","addClass","title","dateUp","isoDate","demo","contentSnippet","navItemsFiltered","navItems","error","console","children","dangerouslySetInnerHTML","__html"],"sources":["E:/Tailieu/Nam3/FrondEnd/AppDocBao/news-reading-web/rss-feed/src/components/ArticleDetailPage/ArticleDetailPage.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport axios from 'axios'; // Thư viện để đọc rss\r\nimport cheerio from 'cheerio'; // Thư viện xử lý rss\r\nimport \"./detail.css\";\r\nimport { useParams } from 'react-router-dom';\r\n// import bootstrap from 'bootstrap/dist/css/bootstrap.min.css';\r\n\r\nconst Detail = ({ articles }) => {\r\n    const { link } = useParams(); // Lấy tham số từ URL, trong trường hợp này là link\r\n    const [detail, setDetail] = useState(null); // State để lưu chi tiết bài viết\r\n    const [feedItems, setFeedItems] = useState([]); // State để lưu danh sách các bài viết liên quan\r\n\r\n    // Hàm giải mã các ký tự đặc biệt trong chuỗi HTML\r\n    function decodeHTMLEntities(text) {\r\n        const entities = {\r\n            '&apos;': \"'\",\r\n            '&amp;': '&',\r\n            '&lt;': '<',\r\n            '&gt;': '>',\r\n            '&quot;': '\"',\r\n        };\r\n\r\n        // Thay thế các ký tự đặc biệt trong chuỗi với các thực thể tương ứng\r\n        Object.keys(entities).forEach(entity => {\r\n            const regex = new RegExp(entity, 'g');\r\n            text = text.replace(regex, entities[entity]);\r\n        });\r\n\r\n        // Sử dụng DOMParser để phân tích chuỗi HTML và trả về nội dung văn bản của nó\r\n        const parser = new DOMParser();\r\n        const doc = parser.parseFromString(text, 'text/html');\r\n        return doc.documentElement.textContent || text;\r\n    }\r\n\r\n    // Hàm trích xuất đường dẫn từ URL\r\n    const extractLinkPath = (url) => {\r\n        const parts = url.split('/');\r\n        return parts[parts.length - 1];\r\n    };\r\n\r\n    // Sử dụng useEffect để gọi API và cập nhật state khi tham số link thay đổi\r\n    useEffect(() => {\r\n        async function fetch() {\r\n            try {\r\n                // Lấy HTML từ articles.content để xử lý\r\n                const html = articles.content;\r\n                const $ = cheerio.load(html);\r\n\r\n                // Xử lý các lớp CSS trong HTML để sử dụng className thay vì class\r\n                $('[class]').each((index, element) => {\r\n                    const classes = $(element).attr('class')?.split(' ') || [];\r\n                    classes.forEach(className => {\r\n                        $(element).removeClass(className).addClass(className);\r\n                    });\r\n                });\r\n\r\n                // Trích xuất các thông tin cần thiết từ HTML\r\n                const title = decodeHTMLEntities(articles.title);\r\n                const content = $.html();\r\n                const dateUp = articles.isoDate;\r\n                const demo = decodeHTMLEntities(articles.contentSnippet);\r\n                const navItemsFiltered = []; // Không có thông tin breadcrumb trong props articles\r\n                \r\n                // Cập nhật state detail với các thông tin vừa trích xuất được\r\n                setDetail({ title, demo, content, dateUp, navItems: navItemsFiltered });\r\n\r\n            } catch (error) {\r\n                console.error('Error fetching the HTML:', error);\r\n            }\r\n        }\r\n\r\n        // Gọi hàm fetch khi component mount\r\n        fetch();\r\n    }, []); // useEffect sẽ chỉ gọi một lần khi component mount\r\n\r\n    // Render UI\r\n    return (\r\n        <div className=\"container\">\r\n            <div className={\"subContainer\"}>\r\n                <div className=\"breadCrumbDetail\">\r\n                    <ul>\r\n                        {/* Không có thông tin breadcrumb trong props articles */}\r\n                    </ul>\r\n                    {/* <div>{detail?.dateUp}</div> */}\r\n                </div>\r\n                <div>\r\n                    <h1 className={\"contentDetailTitle\"}>{detail?.title || 'Loading...'}</h1>\r\n                    <h2 className={\"contentDetailSapo\"}>{detail?.demo}</h2>\r\n                    <div className={\"maincontent\"}\r\n                         dangerouslySetInnerHTML={{ __html: detail?.content || '' }}>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default Detail;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}